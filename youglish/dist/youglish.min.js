(function () {var b=function(){function t(t,e,i){this.youglishClient=t,this.id=e,this.query=i,this.widget=new this.youglishClient.Widget(this.id,{width:640,events:{onVideoChange:this.onVideoChange,onCaptionChange:this.onCaptionChange}})}return t.prototype.activate=function(){this.widget.fetch(this.query,"english","us")},Object.defineProperty(t.prototype,"videoID",{get:function(){return this._videoID},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"caption",{get:function(){return this._caption},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currentTimestamp",{get:function(){return this._currentTimestamp},enumerable:!1,configurable:!0}),t.prototype.onVideoChange=function(t){this._videoID=t.video,console.log("onVideoChange(#"+this.id+"): "+JSON.stringify(t))},t.prototype.onCaptionChange=function(t){this._caption=t.caption,this._currentTimestamp=t.current_time,console.log("onCaptionChange(#"+this.id+"): "+JSON.stringify(t))},t}(),c=function(){function t(t){this.youglishClient=t,this.widgets=new Map}return t.prototype.activate=function(t){var e=t,i=e.id,n=e.dataset.query,o=new b(this.youglishClient,i,n);o.activate(),this.widgets.set(i,o)},t.prototype.gc=function(){},t}();function d(){var t="youglish";if(!document.getElementById(t)){var e=document.createElement("script");e.src="https://youglish.com/public/emb/widget.js",e.id=t,e.type="text/javascript",document.getElementsByTagName("head")[0].appendChild(e)}}var a=null;function e(){console.log("youglish activator"),console.log(window.YG),console.log(a),void 0!==window.YG&&(null===a&&(a=new c(window.YG)),Array.from(document.querySelectorAll(".roam-app a.youglish")).forEach(function(t){null===t.closest(".rm-zoom-item")&&a.activate(t)}),a.gc())}d(),setInterval(e,1e3);})();